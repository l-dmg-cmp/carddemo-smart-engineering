
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>00069-COTRN02_CPY</title>
    <!-- Incluindo o Bootstrap CSS a partir de CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Incluindo o Highlight.js CSS para destaque de código -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        body {
            padding: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        /* Estilos personalizados podem ser adicionados aqui */
    </style>
</head>
<body>
    <div class="container">
        <p>Gerado em: 1 de outubro de 2024</p>
<h1><strong>Título do Documento:</strong> Especificação da Estrutura de Dados de Transações de Cartão</h1>
<p><strong>Descrição Resumida:</strong> Este documento descreve a estrutura dos dados relacionados às transações com cartão de crédito dentro da aplicação CardDemo. Ele define um formato padronizado para capturar e armazenar detalhes cruciais da transação, garantindo consistência e facilitando o processamento e a análise eficientes.</p>
<p><strong>Histórias do Usuário:</strong> Como analista de dados, preciso garantir que todos os registros de transações usados em minha análise estejam completos e precisos, para que eu possa gerar relatórios e insights confiáveis.</p>
<p><strong>Épico Relacionado:</strong> 4 - Processamento de Transações</p>
<p><strong>Requisitos Técnicos:</strong></p>
<ul>
<li><strong>Definição da Estrutura de Dados:</strong>
<ul>
<li>O copybook <code>COTRN02.CPY</code> define duas estruturas de dados: <code>COTRN2AI</code> para entrada e <code>COTRN2AO</code> para saída.</li>
<li>Cada estrutura contém campos representando vários atributos de uma transação com cartão de crédito.</li>
<li>As definições de campo incluem tipos de dados (cláusulas <code>PIC</code>) e comprimentos para garantir a integridade dos dados.</li>
</ul>
</li>
<li><strong>Tipos e Formatos de Dados:</strong>
<ul>
<li>Campos numéricos, como <code>TRNAMTL</code> (Valor da Transação), são definidos usando <code>COMP</code> para fins computacionais.</li>
<li>Campos alfanuméricos, como <code>TRNNAMEI</code> (Nome da Transação), usam <code>PIC X</code> para armazenar dados de texto.</li>
<li>Os campos de data e hora, como <code>CURDATEI</code> (Data Atual) e <code>CURTIMEI</code> (Hora Atual), são definidos como campos alfanuméricos com formatos específicos (por exemplo, <code>YYYYMMDD</code> para data).</li>
</ul>
</li>
<li><strong>Validação de Dados:</strong>
<ul>
<li>Embora não sejam explicitamente definidas no copybook, as regras de validação de dados são cruciais para garantir a integridade dos dados.</li>
<li>Essas regras devem ser implementadas em programas que usam este copybook para validar dados de entrada antes do processamento.</li>
<li>Exemplos de regras de validação:
<ul>
<li><strong>Verificações de Tipo de Dados:</strong> Garanta que os campos numéricos contenham apenas valores numéricos.</li>
<li><strong>Verificações de Formato:</strong> Verifique se os campos de data e hora estão em conformidade com os formatos especificados.</li>
<li><strong>Verificações de Intervalo:</strong> Valide se os campos numéricos estão dentro de intervalos aceitáveis (por exemplo, o valor da transação não pode ser negativo).</li>
<li><strong>Verificações de Validade do Código:</strong> Confirme se os códigos usados em campos como <code>TTYPCDI</code> (Código do Tipo de Transação) existem no sistema.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Transformação de dados:</strong>
<ul>
<li>O copybook usa cláusulas <code>REDEFINES</code> para definir layouts de dados alternativos para os mesmos locais de memória.</li>
<li>Isso permite a transformação de dados entre formatos de entrada e saída.</li>
<li>Por exemplo, <code>COTRN2AO</code> redefine <code>COTRN2AI</code> para lidar com conversões de formato de dados para saída.</li>
</ul>
</li>
</ul>
<p><strong>Modelos Relacionados:</strong></p>
<ul>
<li><code>Transaction</code>:
<ul>
<li><code>transactionName</code> (<code>String</code>): O nome da transação (por exemplo, compra, reembolso).</li>
<li><code>date</code> (<code>Date</code>): A data da transação.</li>
<li><code>time</code> (<code>Time</code>): A hora da transação.</li>
<li><code>activityId</code> (<code>String</code>): Um identificador exclusivo para a transação.</li>
<li><code>cardNumber</code> (<code>String</code>): O número do cartão de crédito usado para a transação.</li>
<li><code>transactionTypeCode</code> (<code>String</code>): Um código que representa o tipo de transação.</li>
<li><code>transactionCategoryCode</code> (<code>String</code>): Um código que categoriza a transação.</li>
<li><code>transactionSource</code> (<code>String</code>): A origem da transação (por exemplo, online, POS).</li>
<li><code>description</code> (<code>String</code>): Uma descrição da transação.</li>
<li><code>amount</code> (<code>Decimal</code>): O valor da transação.</li>
<li><code>originationDate</code> (<code>Date</code>): A data em que a transação foi iniciada.</li>
<li><code>processingDate</code> (<code>Date</code>): A data em que a transação foi processada.</li>
<li><code>merchantId</code> (<code>String</code>): O ID do comerciante envolvido na transação.</li>
<li><code>merchantName</code> (<code>String</code>): O nome do comerciante.</li>
<li><code>merchantCity</code> (<code>String</code>): A cidade do comerciante.</li>
<li><code>merchantZipCode</code> (<code>String</code>): O CEP do comerciante.</li>
<li><code>confirmationStatus</code> (<code>String</code>): O status da transação (por exemplo, aprovada, recusada).</li>
<li><code>errorMessage</code> (<code>String</code>): Qualquer mensagem de erro associada à transação.</li>
</ul>
</li>
</ul>
<p><strong>Configurações:</strong></p>
<ul>
<li>Nenhum</li>
</ul>
<p><strong>Melhorias de Código:</strong></p>
<ul>
<li><strong>Tratamento de Erros:</strong> Implemente um mecanismo de tratamento de erros mais robusto dentro dos programas que usam este copybook. Isso pode envolver:
<ul>
<li>Definir códigos de erro específicos para diferentes falhas de validação.</li>
<li>Registrar erros em um arquivo ou banco de dados para auditoria e solução de problemas.</li>
<li>Fornecer mensagens de erro informativas aos usuários.</li>
</ul>
</li>
<li><strong>Documentação:</strong> Adicione comentários ao copybook para explicar a finalidade de cada campo e quaisquer requisitos de formatação específicos. Isso melhorará a legibilidade e a manutenção do código.</li>
<li><strong>Biblioteca de Validação de Dados:</strong> Considere criar uma biblioteca COBOL separada contendo rotinas de validação de dados reutilizáveis. Isso promoveria a reutilização e a consistência do código em diferentes programas.</li>
</ul>
<p><strong>Melhorias de Segurança:</strong></p>
<ul>
<li><strong>Criptografia de Dados:</strong> Se os dados da transação incluírem informações confidenciais, como números de cartão de crédito, implemente mecanismos de criptografia de dados para proteger esses dados em trânsito e em repouso.</li>
<li><strong>Controle de Acesso:</strong> Garanta que apenas pessoal autorizado tenha acesso aos arquivos de dados de transações e aos programas que os processam.</li>
<li><strong>Log de Auditoria:</strong> Implemente o log de auditoria para rastrear todo o acesso e modificações nos dados da transação. Isso pode ajudar a detectar e investigar quaisquer atividades não autorizadas.</li>
</ul>
<p><strong>Diagrama Conceitual:</strong></p>
<img src="00069-COTRN02_CPY_diagram_1.svg" alt="Mermaid Diagram 1" style="max-width: 100%; height: auto;"><p>–Made by “Smart Engineering” (by Compass.UOL)–</p>

    </div>
    <!-- Incluindo o jQuery e o Bootstrap JS a partir de CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Incluindo o Highlight.js JS para destaque de código -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
