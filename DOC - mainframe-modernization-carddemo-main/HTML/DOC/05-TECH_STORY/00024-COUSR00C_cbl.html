
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>00024-COUSR00C_cbl</title>
    <!-- Incluindo o Bootstrap CSS a partir de CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Incluindo o Highlight.js CSS para destaque de código -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        body {
            padding: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        /* Estilos personalizados podem ser adicionados aqui */
    </style>
</head>
<body>
    <div class="container">
        <p>Gerado em: 1º de outubro de 2024</p>
<p><strong>Título do Documento:</strong> Especificação da Funcionalidade de Lista de Usuários da Aplicação CardDemo</p>
<p><strong>Descrição Resumida:</strong>
Este documento descreve a funcionalidade do programa <code>COUSR00C</code> dentro da aplicação CardDemo. Este programa é responsável por exibir uma lista de usuários para pessoal autorizado (administradores). Ele permite a navegação por registros de usuários paginados e a seleção de usuários específicos para atualização ou exclusão.</p>
<p><strong>Histórias do Usuário:</strong>
Como administrador, preciso visualizar uma lista de todos os usuários no sistema para gerenciar suas contas.</p>
<p><strong>Épico Relacionado:</strong> 6 - Gerenciamento de Usuários e Segurança</p>
<p><strong>Requisitos Técnicos:</strong></p>
<ul>
<li><strong>Exibição da Lista de Usuários:</strong> O programa recupera e exibe uma lista de usuários do arquivo <code>USRSEC</code>. A lista é paginada, com um máximo de 10 usuários exibidos por página.
<ul>
<li>Entrada: ID do usuário da tela anterior ou comando para buscar a próxima ou anterior página.</li>
<li>Processo:
<ul>
<li>Abrir arquivo <code>USRSEC</code>.</li>
<li>Se o ID do usuário for fornecido, leia o registro com o ID fornecido.</li>
<li>Se um comando de navegação de página for recebido, calcule o ID do usuário inicial com base no número da página atual.</li>
<li>Leia e exiba até 10 registros de usuários do ID do usuário inicial.</li>
<li>Armazene os IDs de usuário primeiro e último da página exibida para fins de navegação.</li>
</ul>
</li>
<li>Saída: Uma tela exibindo a lista de usuários com sua ID, nome e tipo.</li>
</ul>
</li>
<li><strong>Seleção do Usuário:</strong> O administrador pode selecionar um usuário da lista para atualização ou exclusão.
<ul>
<li>Entrada: Seleção do usuário (U para atualização, D para exclusão) e o ID do usuário selecionado.</li>
<li>Processo:
<ul>
<li>Validar a seleção do usuário (U/D).</li>
<li>Armazene a ação selecionada e o ID do usuário.</li>
</ul>
</li>
<li>Saída: Transfira o controle para o programa apropriado (<code>COUSR02C</code> para atualização, <code>COUSR03C</code> para exclusão) junto com as informações do usuário selecionado.</li>
</ul>
</li>
<li><strong>Paginação:</strong> O administrador pode navegar entre as páginas de registros de usuários usando as teclas de função (<code>PF7</code> para a página anterior, <code>PF8</code> para a próxima página).
<ul>
<li>Entrada: Pressione a tecla de função (<code>PF7</code> ou <code>PF8</code>).</li>
<li>Processo:
<ul>
<li>Determine o número da página de destino com base na tecla pressionada.</li>
<li>Atualize a variável <code>CDEMO-CU00-PAGE-NUM</code>.</li>
<li>Busque e exiba os registros do usuário para a página de destino.</li>
</ul>
</li>
<li>Saída: A tela da lista de usuários atualizada exibindo a página solicitada.</li>
</ul>
</li>
</ul>
<p><strong>Modelos Relacionados:</strong></p>
<ul>
<li><code>SEC-USER-DATA</code>: Representa um registro de usuário no arquivo <code>USRSEC</code>.
<ul>
<li><code>SEC-USR-ID</code>: ID do Usuário (String).</li>
<li><code>SEC-USR-FNAME</code>: Primeiro Nome do Usuário (String).</li>
<li><code>SEC-USR-LNAME</code>: Sobrenome do Usuário (String).</li>
<li><code>SEC-USR-TYPE</code>: Tipo de Usuário (String).</li>
</ul>
</li>
</ul>
<p><strong>Configurações:</strong></p>
<ul>
<li><code>WS-USRSEC-FILE</code>: Nome do arquivo do arquivo de usuário seguro (<code>USRSEC</code>).</li>
</ul>
<p><strong>Melhorias de Código:</strong></p>
<ul>
<li>Implementar um mecanismo de tratamento de erros mais robusto. Em vez de simplesmente definir um sinalizador de erro, considere registrar mensagens de erro com detalhes como carimbo de data/hora, nome do programa e erro específico encontrado. Isso ajudará na depuração e resolução de problemas.</li>
<li>Adicione comentários para esclarecer o propósito das variáveis ​​e seções do código. Por exemplo, explique o papel de <code>CDEMO-CU00-INFO</code> e seus subcampos.</li>
<li>Explore a possibilidade de usar uma estrutura de dados para gerenciar as seleções do usuário em vez de variáveis ​​individuais como <code>SEL0001I</code> a <code>SEL0010I</code>. Isso pode simplificar o código e torná-lo mais sustentável.</li>
<li>Considere usar um loop para iterar pelos registros do usuário em vez de repetir blocos de código para cada registro. Isso melhorará a legibilidade do código e reduzirá a redundância.</li>
</ul>
<p><strong>Melhorias de Segurança:</strong></p>
<ul>
<li><strong>Limpeza de Entrada:</strong> Implemente a limpeza de entrada para evitar ataques de injeção. Valide e limpe todas as entradas do usuário antes de usá-las em consultas de banco de dados ou outras operações confidenciais.</li>
<li><strong>Tratamento de Erros:</strong> Evite exibir informações confidenciais, como caminhos de arquivo ou detalhes de conexão de banco de dados, em mensagens de erro. Use mensagens de erro genéricas que não revelem os internos do sistema.</li>
<li><strong>Log:</strong> Implemente práticas seguras de registro, garantindo que dados confidenciais, como senhas ou IDs de usuário, não sejam registrados em texto não criptografado. Use técnicas de máscara ou hash para proteger informações confidenciais em logs.</li>
<li><strong>Autenticação e Autorização:</strong> Revise os mecanismos de autenticação e autorização para garantir que apenas pessoal autorizado possa acessar e modificar os dados do usuário. Implemente políticas de senha forte e considere o uso de autenticação multifator para segurança aprimorada.</li>
</ul>
<p><strong>Diagrama Conceitual:</strong></p>
<img src="00024-COUSR00C_cbl_diagram_1.svg" alt="Mermaid Diagram 1" style="max-width: 100%; height: auto;"><p>–Made by “Smart Engineering” (by Compass.UOL)–</p>

    </div>
    <!-- Incluindo o jQuery e o Bootstrap JS a partir de CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Incluindo o Highlight.js JS para destaque de código -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
