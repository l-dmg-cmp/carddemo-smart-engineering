
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>00010-CBTRN03C_cbl</title>
    <!-- Incluindo o Bootstrap CSS a partir de CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Incluindo o Highlight.js CSS para destaque de código -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        body {
            padding: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        /* Estilos personalizados podem ser adicionados aqui */
    </style>
</head>
<body>
    <div class="container">
        <p>Gerado em: 1º de outubro de 2024</p>
<p><strong>Título do Documento:</strong> CardDemo Relatório Detalhado de Transações de Cartão de Crédito - Especificação do Programa</p>
<p><strong>Descrição Resumida:</strong>
Este programa gera um relatório detalhado das transações de cartão de crédito dentro de um intervalo de datas especificado. Ele lê registros de transações, recupera dados relacionados (conta, tipo de transação, categoria) e os formata em um relatório com totais de página, totais de conta e um total geral.</p>
<p><strong>Histórias do Usuário:</strong>
Como analista financeiro, preciso de um relatório detalhado de todas as transações de cartão de crédito dentro de um intervalo de datas específico para que eu possa analisar padrões de transações, reconciliar contas e identificar fraudes potenciais.</p>
<p><strong>Épico Relacionado:</strong> 4 - Processamento de Transações</p>
<p><strong>Requisitos Técnicos:</strong></p>
<ul>
<li><strong>Processamento de Registro de Transação:</strong> O programa processa cada registro de transação do <code>TRANSACT-FILE</code>.
<ul>
<li><strong>Entrada:</strong> <code>TRAN-RECORD</code> de <code>TRANSACT-FILE</code>.</li>
<li><strong>Processamento:</strong>
<ul>
<li>Recupera o ID da conta de <code>CARD-XREF-RECORD</code> em <code>XREF-FILE</code> com base em <code>TRAN-CARD-NUM</code>.</li>
<li>Recupera a descrição do tipo de transação de <code>TRAN-TYPE-RECORD</code> em <code>TRANTYPE-FILE</code> com base em <code>TRAN-TYPE-CD</code>.</li>
<li>Recupera a descrição da categoria da transação de <code>TRAN-CAT-RECORD</code> em <code>TRANCATG-FILE</code> com base em <code>TRAN-TYPE-CD</code> e <code>TRAN-CAT-CD</code>.</li>
<li>Formata as informações recuperadas junto com os detalhes da transação em <code>TRANSACTION-DETAIL-REPORT</code>.</li>
<li>Calcula e atualiza os totais correntes: <code>WS-PAGE-TOTAL</code>, <code>WS-ACCOUNT-TOTAL</code>, <code>WS-GRAND-TOTAL</code>.</li>
</ul>
</li>
<li><strong>Saída:</strong> Grava <code>TRANSACTION-DETAIL-REPORT</code> formatado em <code>REPORT-FILE</code>.</li>
</ul>
</li>
<li><strong>Filtragem de Intervalo de Datas:</strong> O programa filtra transações com base em um intervalo de datas fornecido em <code>DATE-PARMS-FILE</code>.
<ul>
<li><strong>Entrada:</strong> <code>WS-START-DATE</code> e <code>WS-END-DATE</code> de <code>DATE-PARMS-FILE</code>.</li>
<li><strong>Validação:</strong>
<ul>
<li>Garante que <code>WS-START-DATE</code> e <code>WS-END-DATE</code> sejam datas válidas.</li>
<li>Verifica se <code>WS-START-DATE</code> não é posterior a <code>WS-END-DATE</code>.</li>
</ul>
</li>
<li><strong>Filtragem:</strong> Processa apenas transações dentro do intervalo de datas especificado usando <code>TRAN-PROC-TS</code> de <code>TRAN-RECORD</code>.</li>
</ul>
</li>
<li><strong>Geração de Relatório:</strong> O programa gera um relatório formatado com cabeçalhos, detalhes da transação e totais resumidos.
<ul>
<li><strong>Entrada:</strong> Registros <code>TRANSACTION-DETAIL-REPORT</code> formatados, <code>WS-PAGE-TOTAL</code>, <code>WS-ACCOUNT-TOTAL</code>, <code>WS-GRAND-TOTAL</code>.</li>
<li><strong>Formatação:</strong> Usa layouts de relatório predefinidos:
<ul>
<li><code>REPORT-NAME-HEADER</code></li>
<li><code>TRANSACTION-HEADER-1</code></li>
<li><code>TRANSACTION-HEADER-2</code></li>
<li><code>TRANSACTION-DETAIL-REPORT</code></li>
<li><code>REPORT-PAGE-TOTALS</code></li>
<li><code>REPORT-ACCOUNT-TOTALS</code></li>
<li><code>REPORT-GRAND-TOTALS</code></li>
</ul>
</li>
<li><strong>Saída:</strong> Grava os dados formatados do relatório em <code>REPORT-FILE</code>.</li>
</ul>
</li>
<li><strong>Tratamento de Erros:</strong> O programa inclui tratamento de erros básico para operações de arquivo.
<ul>
<li><strong>Verificações de Status do Arquivo:</strong> Usa códigos de status de arquivo (<code>TRANFILE-STATUS</code>, <code>CARDXREF-STATUS</code>, etc.) para verificar erros durante operações de arquivo (abrir, ler, gravar, fechar).</li>
<li><strong>Exibição de Erro:</strong> Exibe mensagens de erro e status do arquivo em caso de erros.</li>
<li><strong>Encerramento do Programa:</strong> Encerra o programa em caso de erros fatais.</li>
</ul>
</li>
</ul>
<p><strong>Modelos Relacionados:</strong></p>
<ul>
<li><strong><code>TRAN-RECORD</code>:</strong> Representa um registro de transação.
<ul>
<li><code>TRAN-CARD-NUM</code> (Alfanumérico): Número do cartão de crédito.</li>
<li><code>TRAN-TYPE-CD</code> (Alfanumérico): Código do tipo de transação.</li>
<li><code>TRAN-CAT-CD</code> (Numérico): Código da categoria da transação.</li>
<li><code>TRAN-AMT</code> (Numérico): Valor da transação.</li>
<li><code>TRAN-PROC-TS</code> (Alfanumérico): Timestamp de processamento da transação.</li>
</ul>
</li>
<li><strong><code>CARD-XREF-RECORD</code>:</strong> Representa um registro de referência cruzada do cartão.
<ul>
<li><code>FD-XREF-CARD-NUM</code> (Alfanumérico): Número do cartão de crédito.</li>
<li><code>XREF-ACCT-ID</code> (Alfanumérico): ID da conta associada ao cartão.</li>
</ul>
</li>
<li><strong><code>TRAN-TYPE-RECORD</code>:</strong> Representa um registro do tipo de transação.
<ul>
<li><code>FD-TRAN-TYPE</code> (Alfanumérico): Código do tipo de transação.</li>
<li><code>TRAN-TYPE-DESC</code> (Alfanumérico): Descrição do tipo de transação.</li>
</ul>
</li>
<li><strong><code>TRAN-CAT-RECORD</code>:</strong> Representa um registro da categoria da transação.
<ul>
<li><code>FD-TRAN-TYPE-CD</code> (Alfanumérico): Código do tipo de transação.</li>
<li><code>FD-TRAN-CAT-CD</code> (Numérico): Código da categoria da transação.</li>
<li><code>TRAN-CAT-TYPE-DESC</code> (Alfanumérico): Descrição da categoria da transação.</li>
</ul>
</li>
</ul>
<p><strong>Configurações:</strong></p>
<ul>
<li><strong>Caminhos de Arquivo:</strong>
<ul>
<li><code>TRANFILE</code>: Caminho para o arquivo de transações (<code>TRANSACT-FILE</code>).</li>
<li><code>CARDXREF</code>: Caminho para o arquivo de referência cruzada do cartão (<code>XREF-FILE</code>).</li>
<li><code>TRANTYPE</code>: Caminho para o arquivo de tipo de transação (<code>TRANTYPE-FILE</code>).</li>
<li><code>TRANCATG</code>: Caminho para o arquivo de categoria de transação (<code>TRANCATG-FILE</code>).</li>
<li><code>TRANREPT</code>: Caminho para o arquivo de saída do relatório (<code>REPORT-FILE</code>).</li>
<li><code>DATEPARM</code>: Caminho para o arquivo de parâmetros de data (<code>DATE-PARMS-FILE</code>).</li>
</ul>
</li>
<li><strong>Formatação do Relatório:</strong>
<ul>
<li><code>REPORT-NAME-HEADER</code>: Layout do cabeçalho do nome do relatório.</li>
<li><code>TRANSACTION-HEADER-1</code>: Layout do cabeçalho da transação 1.</li>
<li><code>TRANSACTION-HEADER-2</code>: Layout do cabeçalho da transação 2.</li>
<li><code>TRANSACTION-DETAIL-REPORT</code>: Layout da linha de detalhe da transação.</li>
<li><code>REPORT-PAGE-TOTALS</code>: Layout da linha de totais da página.</li>
<li><code>REPORT-ACCOUNT-TOTALS</code>: Layout da linha de totais da conta.</li>
<li><code>REPORT-GRAND-TOTALS</code>: Layout da linha de totais gerais.</li>
</ul>
</li>
</ul>
<p><strong>Melhorias de Código:</strong></p>
<ul>
<li><strong>Tratamento de Erros Aprimorado:</strong> Implemente mensagens de erro mais específicas e informativas. Lide com diferentes cenários de erro graciosamente, como dados inválidos em arquivos de entrada.</li>
<li><strong>Validação de Dados Aprimorada:</strong> Adicione verificações de validação de dados para valores de transação, datas e outros campos relevantes para garantir a integridade dos dados.</li>
<li><strong>Modularização:</strong> Divida o programa em módulos menores e reutilizáveis para melhor organização e manutenção do código.</li>
<li><strong>Documentação de Código:</strong> Adicione comentários para explicar a lógica e funcionalidade de diferentes seções do código.</li>
</ul>
<p><strong>Melhorias de Segurança:</strong></p>
<ul>
<li><strong>Controle de Acesso:</strong> Implemente mecanismos de controle de acesso para restringir o acesso não autorizado ao programa, arquivos de entrada e relatórios de saída.</li>
<li><strong>Criptografia de Dados:</strong> Considere criptografar dados confidenciais dentro dos arquivos de transação para proteger contra acesso não autorizado.</li>
<li><strong>Registro de Auditoria:</strong> Implemente o registro de auditoria para rastrear a execução do programa, acesso a arquivos e quaisquer modificações de dados.</li>
</ul>
<p><strong>Diagrama Conceitual:</strong></p>
<img src="00010-CBTRN03C_cbl_diagram_1.svg" alt="Mermaid Diagram 1" style="max-width: 100%; height: auto;"><p>–Made by “Smart Engineering” (by Compass.UOL)–</p>

    </div>
    <!-- Incluindo o jQuery e o Bootstrap JS a partir de CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Incluindo o Highlight.js JS para destaque de código -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
