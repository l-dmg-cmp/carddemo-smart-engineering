sequenceDiagram
    %%Indicates the Participants involved in the process
    participant Card Validation Program
    participant Card Data File
    participant Validated Data File
    participant Error Log

    activate Card Validation Program

    Card Validation Program->>+Card Data File: Open
    Card Data File->>Card Validation Program: Open Successful

    loop For Each Line in Card Data File
        Card Validation Program->>+Card Data File: Read Line
        Card Data File->>Card Validation Program: Line Data
        
        Card Validation Program->>Card Validation Program: Extract Data (card_number, customer_name, expiration_date)
        
        Card Validation Program->>Card Validation Program: Validate Card Number
        alt Card Number is Valid
            Card Validation Program->>Card Validation Program: Validate Card Number Length
            alt Card Number Length is Valid
                Card Validation Program->>Card Validation Program: Validate Expiration Date
                alt Expiration Date is Valid
                    Card Validation Program->>+Validated Data File: Write Record
                    Validated Data File->>Card Validation Program: Write Successful
                else Expiration Date is Invalid
                    Card Validation Program->>+Error Log: Write Error
                    Error Log->>Card Validation Program: Write Successful
                end
            else Card Number Length is Invalid
                Card Validation Program->>+Error Log: Write Error
                Error Log->>Card Validation Program: Write Successful
            end
        else Card Number is Invalid
            Card Validation Program->>+Error Log: Write Error
            Error Log->>Card Validation Program: Write Successful
        end    
    end

    Card Validation Program->>+Card Data File: Close
    Card Data File->>Card Validation Program: Close Successful

    Card Validation Program->>+Validated Data File: Close
    Validated Data File->>-Card Validation Program: Close Successful

    Card Validation Program->>+Error Log: Close
    Error Log->>-Card Validation Program: Close Successful

    deactivate Card Validation Program