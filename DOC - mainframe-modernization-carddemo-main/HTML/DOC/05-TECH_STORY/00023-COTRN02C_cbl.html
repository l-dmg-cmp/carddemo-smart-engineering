
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>00023-COTRN02C_cbl</title>
    <!-- Incluindo o Bootstrap CSS a partir de CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Incluindo o Highlight.js CSS para destaque de código -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        body {
            padding: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        /* Estilos personalizados podem ser adicionados aqui */
    </style>
</head>
<body>
    <div class="container">
        <p>Gerado em: 1º de outubro de 2024</p>
<p><strong>Título do Documento: Especificação de Adição de Transação CardDemo</strong></p>
<p><strong>Descrição Resumida:</strong>
Este documento descreve as especificações para a funcionalidade “Adicionar Transação” no aplicativo CardDemo. Esta funcionalidade permite que usuários autorizados insiram manualmente detalhes de novas transações de cartão de crédito no sistema.</p>
<p><strong>Histórias do Usuário:</strong>
Como usuário do sistema, quero poder adicionar novas transações ao sistema para que eu possa rastrear todas as atividades do cartão de crédito.</p>
<p><strong>Épico Relacionado:</strong> 4 - Processamento de Transações</p>
<p><strong>Requisitos Técnicos:</strong></p>
<ul>
<li><strong>Entrada e Validação de Dados:</strong>
<ul>
<li>O sistema deve fornecer uma tela ou interface para os usuários inserirem os detalhes da transação.</li>
<li>O sistema deve validar as entradas do usuário quanto ao tipo de dados, formato e campos obrigatórios.</li>
<li><strong>ID da Conta:</strong> Numérico, validado em relação ao arquivo <code>CXACAIX</code>.</li>
<li><strong>Número do Cartão:</strong> Numérico, validado em relação ao arquivo <code>CCXREF</code>.</li>
<li><strong>Tipo de Transação:</strong> Código numérico.</li>
<li><strong>Categoria:</strong> Código numérico.</li>
<li><strong>Fonte:</strong> Texto.</li>
<li><strong>Descrição:</strong> Texto.</li>
<li><strong>Valor:</strong> Numérico, formato: <code>-99999999.99</code>.</li>
<li><strong>Data de Origem:</strong> Data, formato: <code>YYYY-MM-DD</code>, validada usando a função <code>CSUTLDTC</code>.</li>
<li><strong>Data de Processamento:</strong> Data, formato: <code>YYYY-MM-DD</code>, validada usando a função <code>CSUTLDTC</code>.</li>
<li><strong>ID do Comerciante:</strong> Numérico.</li>
<li><strong>Nome do Comerciante:</strong> Texto.</li>
<li><strong>Cidade do Comerciante:</strong> Texto.</li>
<li><strong>CEP do Comerciante:</strong> Texto.</li>
</ul>
</li>
<li><strong>Geração de ID de Transação:</strong>
<ul>
<li>O sistema deve gerar um ID de transação exclusivo para cada nova transação.</li>
<li>O ID da transação deve ser sequencial, determinado buscando o último ID de transação do arquivo <code>TRANSACT</code> e incrementando-o em um.</li>
</ul>
</li>
<li><strong>Registro de Transação:</strong>
<ul>
<li>Após a validação bem-sucedida, o sistema deve gravar o novo registro de transação no arquivo <code>TRANSACT</code>.</li>
</ul>
</li>
<li><strong>Tratamento de Erros:</strong>
<ul>
<li>O sistema deve exibir mensagens de erro apropriadas ao usuário em caso de entradas inválidas ou erros do sistema.</li>
</ul>
</li>
<li><strong>Funcionalidade Copiar Última Transação:</strong>
<ul>
<li>O sistema deve fornecer uma opção para copiar dados da última transação inserida para simplificar a entrada de dados para transações semelhantes.</li>
</ul>
</li>
<li><strong>Mensagem de Confirmação:</strong>
<ul>
<li>Após a adição bem-sucedida da transação, o sistema deve exibir uma mensagem de confirmação ao usuário, incluindo o ID da transação gerado.</li>
</ul>
</li>
</ul>
<p><strong>Modelos Relacionados:</strong></p>
<ul>
<li><strong><code>TRAN-RECORD</code>:</strong>
<ul>
<li><code>TRAN-ID</code> <code>Numeric</code>: Identificador exclusivo para uma transação.</li>
<li><code>TRAN-TYPE-CD</code> <code>Code</code>: Representa o tipo de transação.</li>
<li><code>TRAN-CAT-CD</code> <code>Code</code>: Categoriza a transação.</li>
<li><code>TRAN-SOURCE</code> <code>Text</code>: Indica a origem da transação.</li>
<li><code>TRAN-DESC</code> <code>Text</code>: Fornece uma descrição da transação.</li>
<li><code>TRAN-AMT</code> <code>Numeric</code>: Armazena o valor monetário da transação.</li>
<li><code>TRAN-CARD-NUM</code> <code>Numeric</code>: Número do cartão de crédito associado à transação.</li>
<li><code>TRAN-MERCHANT-ID</code> <code>Numeric</code>: Identifica o comerciante envolvido.</li>
<li><code>TRAN-MERCHANT-NAME</code> <code>Text</code>: Armazena o nome do comerciante.</li>
<li><code>TRAN-MERCHANT-CITY</code> <code>Text</code>: Cidade do comerciante.</li>
<li><code>TRAN-MERCHANT-ZIP</code> <code>Text</code>: CEP do comerciante.</li>
<li><code>TRAN-ORIG-TS</code> <code>Timestamp</code>: Timestamp de início da transação.</li>
<li><code>TRAN-PROC-TS</code> <code>Timestamp</code>: Timestamp de processamento da transação.</li>
</ul>
</li>
</ul>
<p><strong>Configurações:</strong></p>
<ul>
<li><strong>Caminhos de Arquivo:</strong>
<ul>
<li>Arquivo <code>TRANSACT</code>: <code>Valor da configuração do sistema</code></li>
<li>Arquivo <code>CXACAIX</code>: <code>Valor da configuração do sistema</code></li>
<li>Arquivo <code>CCXREF</code>: <code>Valor da configuração do sistema</code></li>
</ul>
</li>
<li><strong>Formato de Data:</strong> <code>YYYY-MM-DD</code></li>
<li><strong>Formato de Valor:</strong> <code>-99999999.99</code></li>
</ul>
<p><strong>Melhorias de Código:</strong></p>
<ul>
<li><strong>Tratamento de Erros:</strong> Implementar um mecanismo centralizado de tratamento de erros para melhorar a manutenção e legibilidade do código.</li>
<li><strong>Log:</strong> Adicionar log detalhado para fins de auditoria e solução de problemas.</li>
<li><strong>Modularidade:</strong> Dividir o código em módulos menores e reutilizáveis para melhor organização e manutenção.</li>
<li><strong>Abstração de Dados:</strong> Considerar o uso de estruturas de dados ou classes para encapsular dados de transação e operações relacionadas.</li>
<li><strong>Comentários de Código:</strong> Adicionar comentários claros e concisos para melhorar a legibilidade e o entendimento do código.</li>
</ul>
<p><strong>Melhorias de Segurança:</strong></p>
<ul>
<li><strong>Sanitização de Entrada:</strong> Implementar a sanitização de entrada para evitar vulnerabilidades de injeção.</li>
<li><strong>Autorização:</strong> Impor o controle de acesso baseado em função para restringir a adição de transações apenas a usuários autorizados.</li>
<li><strong>Criptografia de Dados:</strong> Criptografar dados confidenciais, como números de cartão e valores de transação, tanto em trânsito quanto em repouso.</li>
</ul>
<p><strong>Diagrama Conceitual:</strong></p>
<img src="00023-COTRN02C_cbl_diagram_1.svg" alt="Mermaid Diagram 1" style="max-width: 100%; height: auto;"><p>–Made by “Smart Engineering” (by Compass.UOL)–</p>

    </div>
    <!-- Incluindo o jQuery e o Bootstrap JS a partir de CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Incluindo o Highlight.js JS para destaque de código -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
