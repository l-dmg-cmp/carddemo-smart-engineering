
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>00012-COACTVWC_cbl</title>
    <!-- Incluindo o Bootstrap CSS a partir de CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Incluindo o Highlight.js CSS para destaque de código -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        body {
            padding: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        /* Estilos personalizados podem ser adicionados aqui */
    </style>
</head>
<body>
    <div class="container">
        <p>Gerado em: 1 de outubro de 2024</p>
<h1><strong>Título do Documento:</strong> Funcionalidade de Visualização de Conta de Cartão de Crédito</h1>
<h1><strong>Descrição Resumida:</strong></h1>
<p>Este documento descreve as especificações técnicas para a funcionalidade “Visualização de Conta” dentro de um sistema de gerenciamento de cartão de crédito. Ele descreve o processo de recuperação e exibição de detalhes da conta do cartão de crédito por usuários autorizados. A funcionalidade envolve validar a entrada do usuário (número da conta), acessar vários arquivos de dados (CARDXREF, CUSTDAT, ACCTDAT), recuperar informações relevantes da conta e do cliente e apresentar os dados recuperados em um formato amigável.</p>
<h1><strong>Histórias do Usuário:</strong></h1>
<p>Como representante de atendimento ao cliente, preciso visualizar os detalhes completos da conta de cartão de crédito de um cliente para que eu possa responder às suas perguntas com precisão e eficiência.</p>
<h1><strong>Épico Relacionado:</strong></h1>
<p>2 - Gestão de Contas</p>
<h1><strong>Requisitos Técnicos:</strong></h1>
<h2><strong>Fluxo de trabalho:</strong></h2>
<ol>
<li><strong>Entrada do Número da Conta:</strong>
<ul>
<li>O usuário fornece um número de conta de cartão de crédito por meio de um campo de entrada de tela (<code>ACCTSIDO</code> no mapset <code>COACTVW</code>).</li>
</ul>
</li>
<li><strong>Validação do Número da Conta:</strong>
<ul>
<li>O programa valida o número da conta inserido:
<ul>
<li>Verifica se o número da conta tem 11 dígitos.</li>
<li>Verifica se o número da conta é numérico.</li>
<li>Se alguma validação falhar, exibe uma mensagem de erro apropriada (<code>WS-RETURN-MSG</code>) na tela (<code>ERRMSGO</code> no mapset <code>COACTVW</code>).</li>
</ul>
</li>
</ul>
</li>
<li><strong>Recuperar ID do Cliente (se o número da conta for válido):</strong>
<ul>
<li>O programa lê o arquivo <code>CARDXREF</code> usando o número da conta (<code>WS-CARD-RID-ACCT-ID</code>) como chave.</li>
<li>Se encontrado, recupera o ID do cliente correspondente (<code>XREF-CUST-ID</code>) do registro <code>CARDXREF</code>.</li>
<li>Se não for encontrado, define o sinalizador <code>INPUT-ERROR</code>, preenche <code>WS-RETURN-MSG</code> com uma mensagem de erro apropriada e vai para a etapa 7.</li>
</ul>
</li>
<li><strong>Recuperar Detalhes da Conta:</strong>
<ul>
<li>O programa lê o arquivo <code>ACCTDAT</code> usando o número da conta (<code>WS-CARD-RID-ACCT-ID</code>) como chave.</li>
<li>Se encontrado, preenche a estrutura <code>ACCOUNT-RECORD</code> com os detalhes da conta recuperados.</li>
<li>Se não for encontrado, define o sinalizador <code>INPUT-ERROR</code>, preenche <code>WS-RETURN-MSG</code> com uma mensagem de erro apropriada e vai para a etapa 7.</li>
</ul>
</li>
<li><strong>Recuperar Detalhes do Cliente:</strong>
<ul>
<li>O programa lê o arquivo <code>CUSTDAT</code> usando o ID do cliente (<code>CDEMO-CUST-ID</code>) recuperado na etapa 3 como chave.</li>
<li>Se encontrado, preenche a estrutura <code>CUSTOMER-RECORD</code> com os detalhes do cliente recuperados.</li>
<li>Se não for encontrado, define o sinalizador <code>INPUT-ERROR</code>, preenche <code>WS-RETURN-MSG</code> com uma mensagem de erro apropriada e vai para a etapa 7.</li>
</ul>
</li>
<li><strong>Exibir Informações da Conta e do Cliente:</strong>
<ul>
<li>Preenche os campos da tela (mapset <code>CACTVWAO</code>) com as informações da conta e do cliente recuperadas.</li>
</ul>
</li>
<li><strong>Lidar com a Entrada do Usuário:</strong>
<ul>
<li>O programa permite que o usuário:
<ul>
<li>Insira um novo número de conta.</li>
<li>Navegue para outras funcionalidades (por exemplo, visualizar histórico de transações, atualizar informações da conta) usando as teclas PF.</li>
<li>Saia do programa.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2><strong>Formatos de Dados:</strong></h2>
<ul>
<li><strong>Número da Conta (<code>WS-CARD-RID-ACCT-ID</code>):</strong> <code>PIC 9(11)</code> - Valor numérico de 11 dígitos.</li>
<li><strong>ID do Cliente (<code>CDEMO-CUST-ID</code>):</strong> <code>PIC 9(09)</code> - Valor numérico de 9 dígitos.</li>
</ul>
<h2><strong>Tratamento de Erros:</strong></h2>
<ul>
<li><strong>Erros de Arquivo:</strong> Se ocorrer um erro durante as operações do arquivo (leitura, gravação), uma mensagem de erro apropriada (<code>WS-FILE-ERROR-MESSAGE</code>) será gerada, incluindo o nome do arquivo, operação e códigos de resposta CICS.</li>
<li><strong>Erros de Validação de Dados:</strong> Se alguma validação de dados falhar (por exemplo, formato de número de conta inválido), uma mensagem de erro (<code>WS-RETURN-MSG</code>) será exibida ao usuário.</li>
</ul>
<h1><strong>Modelos Relacionados:</strong></h1>
<ul>
<li><strong><code>CARDXREF</code></strong>:
<ul>
<li><code>XREF-CARD-NUM</code>  <code>String</code>: Número do cartão de crédito.</li>
<li><code>XREF-CUST-ID</code> <code>Integer</code>: ID do Cliente.</li>
<li><code>XREF-ACCT-ID</code> <code>String</code>: ID da Conta.</li>
</ul>
</li>
<li><strong><code>ACCTDAT</code></strong>:
<ul>
<li><code>ACCT-ID</code> <code>String</code>: ID da Conta.</li>
<li><code>ACCT-CUST-ID</code> <code>Integer</code>: ID do Cliente.</li>
<li><code>ACCT-STATUS</code> <code>String</code>: Status da conta.</li>
<li><code>ACCT-BALANCE</code> <code>Decimal</code>: Saldo atual da conta.</li>
<li><code>ACCT-CREDIT-LIMIT</code> <code>Decimal</code>: Limite de crédito da conta.</li>
</ul>
</li>
<li><strong><code>CUSTDAT</code></strong>:
<ul>
<li><code>CUST-ID</code> <code>Integer</code>: Identificador único para um cliente.</li>
<li><code>CUST-NAME</code> <code>String</code>: Nome completo do cliente.</li>
<li><code>CUST-ADDRESS</code> <code>String</code>: Endereço do cliente.</li>
<li><code>CUST-PHONE</code> <code>String</code>: Número de telefone do cliente.</li>
</ul>
</li>
</ul>
<h1><strong>Configurações:</strong></h1>
<ul>
<li>Caminhos de Arquivo:
<ul>
<li><code>CARDXREF</code>: <code>LIT-CARDXREFNAME-ACCT-PATH</code> - <code>CXACAIX</code></li>
<li><code>ACCTDAT</code>: <code>LIT-ACCTFILENAME</code> - <code>ACCTDAT</code></li>
<li><code>CUSTDAT</code>: <code>LIT-CUSTFILENAME</code> - <code>CUSTDAT</code></li>
</ul>
</li>
<li>Mensagens de Erro:
<ul>
<li><code>WS-RETURN-MSG</code>:  Contém várias mensagens de erro com base nos resultados da validação e erros de arquivo.</li>
</ul>
</li>
</ul>
<h1><strong>Melhorias de Código:</strong></h1>
<ul>
<li><strong>Tratamento de Erros Padronizado:</strong> Implemente uma abordagem mais centralizada e consistente para o tratamento de erros, potencialmente usando um módulo dedicado ao tratamento de erros. Isso melhoraria a manutenção e reduziria a duplicação de código.</li>
<li><strong>Validação Aprimorada:</strong> Adicione verificações de validação mais robustas para entrada do usuário, como verificar o comprimento do número da conta e o tipo de dados.</li>
<li><strong>Feedback do Usuário Aprimorado:</strong> Forneça mensagens mais informativas e fáceis de entender para guiar o usuário pelo processo, especialmente em caso de erros.</li>
<li><strong>Modularidade do Código:</strong> Divida o programa em módulos menores e mais gerenciáveis ​​para melhor organização e legibilidade.</li>
</ul>
<h1><strong>Melhorias de Segurança:</strong></h1>
<ul>
<li><strong>Limpeza de Entrada:</strong> Implemente a limpeza de entrada para evitar vulnerabilidades como injeção de SQL.</li>
<li><strong>Autenticação e Autorização:</strong> Garanta que apenas usuários autorizados possam acessar a funcionalidade “Visualizar Conta” e informações confidenciais da conta.</li>
<li><strong>Log:</strong> Implemente mecanismos de log para rastrear ações do usuário, acesso a dados e quaisquer erros encontrados.</li>
</ul>
<h1><strong>Diagrama Conceitual:</strong></h1>
<img src="00012-COACTVWC_cbl_diagram_1.svg" alt="Mermaid Diagram 1" style="max-width: 100%; height: auto;"><p>–Made by “Smart Engineering” (by Compass.UOL)–</p>

    </div>
    <!-- Incluindo o jQuery e o Bootstrap JS a partir de CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Incluindo o Highlight.js JS para destaque de código -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
