
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>00019-CORPT00C_cbl</title>
    <!-- Incluindo o Bootstrap CSS a partir de CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Incluindo o Highlight.js CSS para destaque de código -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        body {
            padding: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        /* Estilos personalizados podem ser adicionados aqui */
    </style>
</head>
<body>
    <div class="container">
        <p>Gerado em: 1º de outubro de 2024</p>
<h1><strong>Título do Documento:</strong> CardDemo Submissão de Relatório de Transações - Especificação do Programa</h1>
<h1><strong>Descrição Resumida:</strong></h1>
<p>Este documento de especificação detalha a funcionalidade do programa <code>CORPT00C.cbl</code> dentro da aplicação CardDemo. Este programa permite que os usuários iniciem a geração de relatórios de transações com base em períodos predefinidos (mensal, anual) ou um intervalo de datas personalizado. O programa valida a entrada do usuário, prepara uma solicitação de trabalho em lote e a envia para processamento.</p>
<h1><strong>Histórias do Usuário:</strong></h1>
<p>Como usuário comercial, preciso gerar relatórios resumidos de transações de cartão de crédito para vários períodos (mensal, anual ou intervalo de datas personalizado) para analisar as tendências e o desempenho dos negócios.</p>
<h1><strong>Epic Relacionado:</strong></h1>
<p><strong>5 - Relatórios e Análise</strong></p>
<h1><strong>Requisitos Funcionais:</strong></h1>
<ol>
<li>
<p><strong>Seleção do Tipo de Relatório:</strong></p>
<ul>
<li>O programa deve permitir que o usuário escolha entre três tipos de relatório:
<ul>
<li>Mensal</li>
<li>Anual</li>
<li>Personalizado</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Entrada de Data (Relatório Personalizado):</strong></p>
<ul>
<li>Para o tipo de relatório “Personalizado”, o programa deve solicitar ao usuário que insira uma data de início e uma data de término.</li>
</ul>
</li>
<li>
<p><strong>Validação de Data:</strong></p>
<ul>
<li>O programa deve validar as datas inseridas quanto a:
<ul>
<li><strong>Formato:</strong> As datas devem estar no formato AAAA-MM-DD.</li>
<li><strong>Ordem Lógica:</strong> A data de início não pode ser posterior à data de término.</li>
<li><strong>Datas Válidas:</strong> As datas inseridas devem representar datas de calendário válidas.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Geração de Solicitação de Relatório:</strong></p>
<ul>
<li>Com base no tipo de relatório selecionado e nas datas inseridas, o programa deve gerar uma solicitação de trabalho em lote contendo:
<ul>
<li>Tipo de relatório</li>
<li>Data de início</li>
<li>Data de término</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Submissão de Trabalho:</strong></p>
<ul>
<li>O programa deve enviar a solicitação de trabalho em lote gerada para uma fila para processamento pelo sistema de processamento em lote.</li>
</ul>
</li>
<li>
<p><strong>Feedback do Usuário:</strong></p>
<ul>
<li>O programa deve fornecer ao usuário feedback sobre o status da solicitação do relatório:
<ul>
<li>Mensagem de confirmação após o envio bem-sucedido</li>
<li>Mensagem de erro em caso de entrada inválida ou outros problemas</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1><strong>Requisitos Não Funcionais:</strong></h1>
<ol>
<li><strong>Desempenho:</strong> O programa deve processar a entrada do usuário e enviar a solicitação de relatório com latência mínima, idealmente em 2 segundos.</li>
<li><strong>Confiabilidade:</strong> O programa deve ser robusto e lidar com erros inesperados normalmente, sem travar. Deve garantir a integridade dos dados e evitar a geração de relatórios incorretos.</li>
<li><strong>Manutenibilidade:</strong> O código do programa deve ser bem documentado e seguir uma estrutura modular para facilitar futuras modificações e aprimoramentos.</li>
<li><strong>Segurança:</strong> O programa deve ser acessível apenas a usuários autorizados com as permissões necessárias para gerar relatórios de transações.</li>
</ol>
<h1><strong>Critérios de Aceitação:</strong></h1>
<ol>
<li>O programa compila e vincula com sucesso, sem erros ou avisos.</li>
<li>O programa exibe corretamente a tela de seleção do tipo de relatório e lida com a entrada do usuário.</li>
<li>O programa valida com sucesso as datas inseridas e fornece mensagens de erro apropriadas para entrada inválida.</li>
<li>O programa gera uma solicitação de trabalho em lote bem formatada, contendo o tipo de relatório, a data de início e a data de término corretos.</li>
<li>O programa envia a solicitação de trabalho para a fila designada sem erros.</li>
<li>O programa fornece ao usuário mensagens de feedback apropriadas (confirmação ou erro) com base no resultado do envio da solicitação.</li>
<li>O programa lida com erros inesperados normalmente e exibe mensagens de erro informativas para o usuário.</li>
</ol>
<h1><strong>Melhorias de Código:</strong></h1>
<ol>
<li><strong>Tratamento de Erros:</strong> Implemente uma rotina de tratamento de erros centralizada para capturar e registrar erros de forma consistente. Exiba mensagens de erro detalhadas para o usuário, incluindo o código do erro e uma breve descrição.</li>
<li><strong>Modularidade:</strong> Divida o parágrafo <code>PROCESS-ENTER-KEY</code> em sub-rotinas menores e mais gerenciáveis com base no tipo de relatório. Isso melhorará a legibilidade e a manutenção do código.</li>
<li><strong>Biblioteca de Validação de Data:</strong> Considere o uso de uma biblioteca ou utilitário de validação de data dedicado em vez da lógica de validação embutida. Isso melhorará a reutilização do código e potencialmente simplificará o processo de validação.</li>
<li><strong>Configuração:</strong> Externalize parâmetros configuráveis, como o nome TDQ (<code>JOBS</code>) e o nome do programa em lote (<code>TRANREPT</code>), para um arquivo de configuração separado ou variáveis de ambiente. Isso melhorará a flexibilidade e a facilidade de implantação.</li>
</ol>
<h1><strong>Melhorias de Segurança:</strong></h1>
<ol>
<li><strong>Sanitização de Entrada:</strong> Implemente a sanitização de entrada adequada para evitar vulnerabilidades como injeção de SQL ou injeção de comando, embora a implementação atual sugira um sistema orientado a lote.</li>
<li><strong>Autenticação e Autorização:</strong> Imponha mecanismos rígidos de autenticação e autorização para garantir que apenas usuários autorizados possam acessar e iniciar o processo de geração de relatórios.</li>
<li><strong>Auditoria:</strong> Registre todas as solicitações de geração de relatórios, incluindo o ID do usuário, carimbo de data/hora, tipo de relatório e intervalo de datas, para fins de auditoria e rastreamento.</li>
</ol>
<h1><strong>Diagrama Conceitual:</strong></h1>
<img src="00019-CORPT00C_cbl_diagram_1.svg" alt="Mermaid Diagram 1" style="max-width: 100%; height: auto;"><p>–Made by “Smart Engineering” (by Compass.UOL)–</p>

    </div>
    <!-- Incluindo o jQuery e o Bootstrap JS a partir de CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Incluindo o Highlight.js JS para destaque de código -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
