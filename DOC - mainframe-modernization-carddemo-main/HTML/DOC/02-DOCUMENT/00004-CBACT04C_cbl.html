
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>00004-CBACT04C_cbl</title>
    <!-- Incluindo o Bootstrap CSS a partir de CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Incluindo o Highlight.js CSS para destaque de código -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        body {
            padding: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        /* Estilos personalizados podem ser adicionados aqui */
    </style>
</head>
<body>
    <div class="container">
        <p>Gerado em: 1º de outubro de 2024</p>
<h1>Especificação de Cálculo de Juros do CardDemo</h1>
<h2>Título</h2>
<ul>
<li>Título do Documento: CardDemo Módulo de Cálculo de Juros - Especificação de Processamento em Lote</li>
</ul>
<h2>Descrição resumida</h2>
<p>Este documento descreve os requisitos e especificações para o Módulo de Cálculo de Juros do CardDemo, um programa de processamento em lote responsável por calcular e aplicar juros mensais a contas de cartão de crédito dentro do sistema CardDemo. Este módulo garante uma avaliação precisa dos juros com base em regras predefinidas e detalhes da conta do cliente.</p>
<h2>Histórico da Versão</h2>
<ul>
<li>Versão 1.0: Versão inicial - Cálculo de Juros com base no Grupo de Contas e Categoria de Transação</li>
</ul>
<h2>Descrição do Processo</h2>
<p>O Módulo de Cálculo de Juros opera como um processo em lote, executado periodicamente (provavelmente mensalmente) para calcular e aplicar encargos de juros às contas dos clientes. O processo envolve as seguintes etapas:</p>
<ol>
<li>
<p><strong>Coleta de Dados:</strong> O módulo recupera dados de várias fontes, incluindo Arquivo de Saldo de Categoria de Transação, Arquivo de Referência Cruzada, Arquivo de Grupo de Divulgação e Arquivo Mestre de Conta.</p>
</li>
<li>
<p><strong>Cálculo de Juros:</strong> Com base no grupo de contas do cliente, categoria de transação e taxas de juros predefinidas, o módulo calcula os juros mensais para cada categoria de transação.</p>
</li>
<li>
<p><strong>Atualização da Conta:</strong> Os juros calculados são adicionados ao saldo da conta do cliente no Arquivo Mestre da Conta.</p>
</li>
<li>
<p><strong>Geração de Transação:</strong> O módulo gera um registro de transação para cada aplicação de juros, registrando os detalhes da transação, valor e timestamps.</p>
</li>
<li>
<p><strong>Integridade de Dados:</strong> Após a conclusão, o módulo garante o fechamento de todos os arquivos acessados, mantendo a integridade dos dados.</p>
</li>
</ol>
<h2>Requisitos para Iniciar o Processo</h2>
<ol>
<li>
<p><strong>Arquivo de Saldo de Categoria de Transação (TCATBALF):</strong> Contém uma divisão do saldo de cada cliente, categorizado por tipo de transação (por exemplo, compras, adiantamentos em dinheiro).</p>
</li>
<li>
<p><strong>Arquivo de Referência Cruzada (XREFFILE):</strong> Vincula o número do cartão de crédito de um cliente ao seu ID de conta.</p>
</li>
<li>
<p><strong>Arquivo de Grupo de Divulgação (DISCGRP):</strong> Contém as taxas de juros associadas a diferentes grupos de contas e categorias de transação.</p>
</li>
<li>
<p><strong>Arquivo Mestre de Conta (ACCTFILE):</strong> O repositório central para informações da conta do cliente, incluindo saldos e taxas de juros.</p>
</li>
</ol>
<h2>Validações e Regras</h2>
<ul>
<li>
<p><strong>Determinação da Taxa de Juros:</strong> As taxas de juros são determinadas com base no grupo de contas atribuído ao cliente e na categoria de transação específica.</p>
</li>
<li>
<p><strong>Taxa de Juros Padrão:</strong> Se a taxa de juros de um grupo de divulgação específico não for encontrada, o sistema utiliza uma taxa de juros do grupo ‘DEFAULT’ predefinida.</p>
</li>
<li>
<p><strong>Histórico de Transações:</strong> Cada aplicação de juros é registrada como uma transação separada no Arquivo de Transações.</p>
</li>
<li>
<p><strong>Cálculo de Juros Mensais:</strong> Os juros são calculados e aplicados mensalmente.</p>
</li>
</ul>
<h2>Detalhes técnicos</h2>
<p><strong>Programa Principal:</strong></p>
<ul>
<li><strong><code>CBACT04C.cbl</code>:</strong> O principal programa COBOL responsável por executar o processo de cálculo de juros.</li>
</ul>
<p><strong>Arquivos Principais:</strong></p>
<ul>
<li><strong>TCATBAL-FILE:</strong> Arquivo de Saldo de Categoria de Transação</li>
<li><strong>XREF-FILE:</strong> Arquivo de Referência Cruzada</li>
<li><strong>DISCGRP-FILE:</strong> Arquivo de Grupo de Divulgação</li>
<li><strong>ACCOUNT-FILE:</strong> Arquivo Mestre de Conta</li>
<li><strong>TRANSACT-FILE:</strong> Arquivo de Transação</li>
</ul>
<p><strong>Variáveis Importantes:</strong></p>
<ul>
<li><strong><code>TRAN-CAT-BAL</code>:</strong> Saldo da categoria de transação</li>
<li><strong><code>DIS-INT-RATE</code>:</strong> Taxa de juros recuperada do Arquivo de Grupo de Divulgação</li>
<li><strong><code>WS-MONTHLY-INT</code>:</strong> Juros mensais calculados</li>
<li><strong><code>WS-TOTAL-INT</code>:</strong> Juros totais acumulados para a conta</li>
<li><strong><code>ACCT-CURR-BAL</code>:</strong> Saldo atual da conta</li>
<li><strong><code>TRAN-ID</code>:</strong> Identificador exclusivo para cada transação</li>
<li><strong><code>TRAN-TYPE-CD</code>:</strong> Código do tipo de transação (por exemplo, ‘01’ para juros)</li>
<li><strong><code>TRAN-CAT-CD</code>:</strong> Código da categoria de transação (por exemplo, ‘05’ para juros)</li>
<li><strong><code>TRAN-SOURCE</code>:</strong> Origem da transação (por exemplo, ‘Sistema’)</li>
<li><strong><code>TRAN-DESC</code>:</strong> Descrição da transação</li>
<li><strong><code>TRAN-AMT</code>:</strong> Valor da transação</li>
<li><strong><code>TRAN-CARD-NUM</code>:</strong> Número do cartão de crédito associado à transação</li>
<li><strong><code>TRAN-ORIG-TS</code>:</strong> Timestamp da origem da transação</li>
<li><strong><code>TRAN-PROC-TS</code>:</strong> Timestamp do processamento da transação</li>
</ul>
<p><strong>Métodos/Parágrafos:</strong></p>
<ul>
<li><strong><code>1000-TCATBALF-GET-NEXT</code>:</strong> Lê registros do Arquivo de Saldo de Categoria de Transação.</li>
<li><strong><code>1050-UPDATE-ACCOUNT</code>:</strong> Atualiza o saldo da conta no Arquivo Mestre da Conta.</li>
<li><strong><code>1100-GET-ACCT-DATA</code>:</strong> Recupera dados da conta do Arquivo Mestre da Conta.</li>
<li><strong><code>1110-GET-XREF-DATA</code>:</strong> Recupera dados de referência cruzada do Arquivo de Referência Cruzada.</li>
<li><strong><code>1200-GET-INTEREST-RATE</code>:</strong> Recupera a taxa de juros do Arquivo de Grupo de Divulgação.</li>
<li><strong><code>1300-COMPUTE-INTEREST</code>:</strong> Calcula os juros mensais.</li>
<li><strong><code>1300-B-WRITE-TX</code>:</strong> Grava o registro da transação de juros no Arquivo de Transações.</li>
</ul>
<h2>Segurança</h2>
<ul>
<li><strong>Segurança de Processamento em Lote:</strong> A execução do trabalho em lote deve estar sujeita a medidas de segurança adequadas, incluindo acesso restrito a dados e sistemas de produção.</li>
</ul>
<h2>Impacto em Outros Sistemas</h2>
<ul>
<li><strong>Módulo de Gerenciamento de Conta:</strong> Os cálculos de juros realizados por este módulo impactam diretamente os saldos das contas dos clientes.</li>
<li><strong>Módulo de Faturamento:</strong> As transações de juros geradas serão refletidas nos extratos dos clientes.</li>
<li><strong>Módulo de Relatórios:</strong> Os cálculos de juros serão usados para gerar vários relatórios, como relatórios mensais de juros ganhos.</li>
</ul>
<h2>Modelos</h2>
<table>
<thead>
<tr>
<th>Campo de Nome</th>
<th>Tipo</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FD-TRAN-CAT-KEY</code></td>
<td>Grupo</td>
<td>Campos-chave para o Arquivo de Saldo de Categoria de Transação</td>
</tr>
<tr>
<td><code>FD-TRANCAT-ACCT-ID</code></td>
<td>Numérico (9)</td>
<td>Identificador da Conta</td>
</tr>
<tr>
<td><code>FD-TRANCAT-TYPE-CD</code></td>
<td>Alfanumérico (2)</td>
<td>Código do Tipo de Transação</td>
</tr>
<tr>
<td><code>FD-TRANCAT-CD</code></td>
<td>Numérico (4)</td>
<td>Código da Transação</td>
</tr>
<tr>
<td><code>FD-XREF-CARD-NUM</code></td>
<td>Alfanumérico (16)</td>
<td>Número do Cartão de Crédito</td>
</tr>
<tr>
<td><code>FD-XREF-CUST-NUM</code></td>
<td>Numérico (9)</td>
<td>Número do Cliente</td>
</tr>
<tr>
<td><code>FD-XREF-ACCT-ID</code></td>
<td>Numérico (11)</td>
<td>Identificador da Conta</td>
</tr>
<tr>
<td><code>FD-DISCGRP-KEY</code></td>
<td>Grupo</td>
<td>Campos-chave para o Arquivo de Grupo de Divulgação</td>
</tr>
<tr>
<td><code>FD-DIS-ACCT-GROUP-ID</code></td>
<td>Alfanumérico (10)</td>
<td>Identificador do Grupo de Contas</td>
</tr>
<tr>
<td><code>FD-DIS-TRAN-TYPE-CD</code></td>
<td>Alfanumérico (2)</td>
<td>Código do Tipo de Transação</td>
</tr>
<tr>
<td><code>FD-DIS-TRAN-CAT-CD</code></td>
<td>Numérico (4)</td>
<td>Código da Transação</td>
</tr>
</tbody>
</table>
<h2>Principais Referências</h2>
<ul>
<li><strong>Documentação de Arquitetura do Sistema CardDemo</strong></li>
<li><strong>Dicionário de Dados</strong></li>
</ul>
<p><strong>Considerações Adicionais:</strong></p>
<ul>
<li><strong>Tratamento de Erros:</strong> Implemente um tratamento de erros robusto para gerenciar situações inesperadas (por exemplo, erros de arquivo, dados inválidos) normalmente.</li>
<li><strong>Log:</strong> Incorpore mecanismos de log detalhados para rastrear o fluxo do processo, erros e exceções.</li>
<li><strong>Otimização de Desempenho:</strong> Considere técnicas de otimização de desempenho para lidar com grandes volumes de dados com eficiência.</li>
<li><strong>Escalabilidade:</strong> Projete o módulo para acomodar o crescimento futuro no volume de dados e nos requisitos de processamento.</li>
</ul>
<p><strong>Observação:</strong> Esta especificação é baseada no trecho de código fornecido e pode não abranger todos os aspectos do Módulo de Cálculo de Juros. Análise adicional e colaboração com a equipe de desenvolvimento são recomendadas para uma compreensão e implementação abrangentes.</p>
<p>–Made by “Smart Engineering” (by Compass.UOL)–</p>

    </div>
    <!-- Incluindo o jQuery e o Bootstrap JS a partir de CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Incluindo o Highlight.js JS para destaque de código -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
