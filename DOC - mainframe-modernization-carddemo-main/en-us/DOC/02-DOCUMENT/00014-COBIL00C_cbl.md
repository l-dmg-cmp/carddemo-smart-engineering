Generated at: 1st October of 2024

# CardDemo Online Bill Payment

## Title

- Title Document: CardDemo - Online Bill Payment Specification

## Summary Description

This document outlines the specifications for the "Online Bill Payment" functionality within the CardDemo application. This functionality enables credit cardholders to conveniently pay their outstanding balance in full through an online interface. This process is seamlessly integrated with the core credit card management system, ensuring accurate balance updates and transaction recording.

## Version History

- Version 1.0: Initial version - Full balance payment functionality.

## Process Description

The Online Bill Payment process facilitates the complete payment of a credit card's outstanding balance. 

1. **Account Input:** The customer provides their Account ID through the online interface.
2. **Balance Retrieval:** The system retrieves the current balance for the provided Account ID from the ACCTDAT file.
3. **Payment Confirmation:** The customer is presented with their current balance and prompted to confirm their payment.
4. **Transaction Processing:** Upon confirmation, the system generates a unique Transaction ID. It then records the payment details (amount, date, time) in the TRANSACT file, and updates the account balance in the ACCTDAT file. 
5. **Confirmation Display:** A confirmation message, including the generated Transaction ID, is displayed to the customer.

## Requirements to Start the Process

1. **Authenticated User:**  The user must have successfully logged in to the CardDemo system.
2. **Valid Account:** The provided Account ID must exist in the system. 

## Validations and Rules

- **Full Balance Payment:** Only the full outstanding balance can be paid. Partial payments are not permitted through this functionality.
- **Payment Confirmation:**  The system explicitly requires confirmation from the customer before processing the payment. This is a crucial step to prevent any accidental or unintended payments.
- **Unique Transaction ID:** Each payment is assigned a unique identifier (Transaction ID), ensuring traceability and facilitating future reconciliation efforts.
- **Real-time Processing:** Upon successful payment confirmation, the account balance is updated in real-time, reflecting the transaction immediately.
- **Auditing and Reporting:** All transaction details are logged into the TRANSACT file, establishing a comprehensive audit trail for future reporting and analysis.

## Technical Details

**Main Program:**

- **COBIL00C:** This program manages the online bill payment process, handling user interactions, data validation, and file updates.

**Main Functions/Methods:**

- **READ-ACCTDAT-FILE:** Retrieves the account details (including balance) from the ACCTDAT file based on the provided Account ID.
- **READ-CXACAIX-FILE:** Accesses the CARD-XREF-RECORD to retrieve card details using the Account ID.
- **READPREV-TRANSACT-FILE, STARTBR-TRANSACT-FILE, ENDBR-TRANSACT-FILE:** These functions work together to find the last used Transaction ID and use it to generate a new unique ID for the current transaction.
- **WRITE-TRANSACT-FILE:**  Writes the transaction details to the TRANSACT file, creating a record of the payment.
- **UPDATE-ACCTDAT-FILE:** Updates the Account balance in the ACCTDAT file to reflect the payment.
- **GET-CURRENT-TIMESTAMP:** Captures the current date and time to be recorded with the transaction details.

**Variables:**

- **ACTIDINI:** Input field for the Account ID provided by the customer.
- **CURBALI:** Displays the current balance retrieved from the ACCTDAT file.
- **CONFIRMI:** Input field for the customer to confirm the payment (Y/N).
- **WS-TRAN-ID-NUM:**  Internal variable holding the newly generated unique Transaction ID.
- **WS-TIMESTAMP:** Stores the timestamp captured during the transaction.

**Files:**

- **ACCTDAT:**  Contains account details, including the current balance.
- **TRANSACT:** Stores all transaction details for auditing and reporting purposes.
- **CXACAIX:**  Cross-reference file linking Account IDs with Card numbers.

## Impact on Other Systems

- **Account Management:**  The Online Bill Payment functionality directly impacts the accuracy and real-time status of customer accounts.
- **Reporting and Analytics:** The transaction data generated by this process feeds into reporting and analytics systems, providing insights into payment activity.

## Models

| Name Field | Type | Description |
|---|---|---|
| ACCT-ID | String | Unique identifier for a customer's account. |
| ACCT-CURR-BAL | Decimal | Current outstanding balance on the account. |
| TRAN-ID | String | Unique identifier for each transaction. |
| TRAN-TYPE-CD | String | Code specifying the type of transaction (e.g., '02' for Bill Payment). |
| TRAN-CAT-CD | Integer |  Code representing the category of the transaction. |
| TRAN-SOURCE | String |  Origin of the transaction (e.g., 'POS TERM', 'ONLINE'). |
| TRAN-DESC | String | Description of the transaction. |
| TRAN-AMT | Decimal |  Amount of the transaction. |
| TRAN-CARD-NUM | String | Credit card number associated with the transaction. |
| TRAN-MERCHANT-ID | Integer |  Unique identifier for the merchant involved in the transaction. |
| TRAN-MERCHANT-NAME | String |  Name of the merchant associated with the transaction. |
| TRAN-ORIG-TS | Timestamp | Timestamp indicating when the transaction was initiated. |
| TRAN-PROC-TS | Timestamp |  Timestamp indicating when the transaction was processed. |
| XREF-ACCT-ID | String | Account ID used for cross-referencing with the card details. |
| XREF-CARD-NUM | String | Credit card number linked to the Account ID. |

## Main References

- **COBOL00 Program:** The core program handling user interface and navigation within the CardDemo application.
- **ACCTDAT File:** The primary data source for account balances and details.
- **TRANSACT File:** The data store for all transaction records.

**Additional Considerations:**

- **Security:** Implement robust security measures to protect sensitive customer data during the online payment process, including encryption and secure authentication mechanisms.
- **Error Handling:**  Develop comprehensive error handling routines to manage various scenarios such as invalid account numbers, connection issues, and transaction failures.
- **User Experience:**  Design the online interface with user experience in mind, ensuring a clear and intuitive process for making payments. 
- **Integration Testing:**  Thorough integration testing is essential to guarantee the seamless operation of the Online Bill Payment functionality with other components of the CardDemo application.

--Made by "Smart Engineering" (by Compass.UOL)--